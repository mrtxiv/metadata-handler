{
    "name": "Metadata Handler (HTTP)",
    "author": "user_8342",
    "parsers": [
        {
            "name": "Plex",
            "version": 1,
            "about": "HTTP-based content resolver plugin.",
            "website": "https://metadata.provider.plex.tv",
            "outputPath": "links",
            "outputMap": {
                "trailers": "url"
            },
            "tokenResolver": {
                "url": "https://plex.tv/api/v2/users/anonymous",
                "request": {
                    "method": "POST",
                    "headers": {
                        "accept": "application/json",
                        "X-Plex-Client-Identifier": "rivus-addon-trailers",
                        "X-Plex-Product": "Plex Web",
                        "X-Plex-Version": "4.141.1",
                        "X-Plex-Platform": "Chrome"
                    }
                },
                "tokenPath": "authToken"
            },
            "contentIdResolver": {
                "url": "https://metadata.provider.plex.tv/library/metadata/matches?type={typeNum}&guid=com.plexapp.agents.imdb://{contentId}",
                "fallbackUrl": "https://metadata.provider.plex.tv/library/metadata/matches?type={typeNum}&guid=imdb://{contentId}",
                "request": {
                    "method": "GET",
                    "headers": {
                        "accept": "application/json",
                        "X-Plex-Token": "{token}",
                        "X-Plex-Client-Identifier": "metadata-resolver-client"
                    }
                },
                "results": "MediaContainer.Metadata",
                "id": {
                    "query": "ratingKey",
                    "regex": "([a-f0-9]{24}|[0-9]+)"
                }
            },
            "jsonParser": {
                "searchUrl": "/library/metadata/{contentId}/extras",
                "request": {
                    "method": "GET",
                    "headers": {
                        "accept": "application/json",
                        "X-Plex-Token": "{token}",
                        "X-Plex-Client-Identifier": "rivus-addon-trailers"
                    }
                },
                "results": "MediaContainer.Metadata",
                "url": {
                    "query": "Media.0.url"
                },
                "title": {
                    "query": "title"
                },
                "description": {
                    "query": "parentTitle"
                },
                "mimeType": {
                    "query": "Media.0.container"
                },
                "format": {
                    "query": "Media.0.videoResolution"
                }
            }
        }
    ]
}